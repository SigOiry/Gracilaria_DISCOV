legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png",RGB_Saja,width = 10, height = 9, dpi = 400)
RGB_Saja<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Saja_RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4010533,
max_col_value = 150
)+
geom_text(aes(x =  ext(Saja_RGB)[1]+0.04*(ext(Saja_RGB)[2]-ext(Saja_RGB)[1]),
y =  ext(Saja_RGB)[4]-0.08*(ext(Saja_RGB)[4]-ext(Saja_RGB)[3]),
label = "C"),
size = 10)+
ggspatial::annotation_scale(location = "br",
pad_y = unit(0.5, "cm"),
text_cex=2)+
theme_Bede_Map()+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png",RGB_Saja,width = 10, height = 9, dpi = 400)
RGB_Saja<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Saja_RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4010533,
max_col_value = 200
)+
geom_text(aes(x =  ext(Saja_RGB)[1]+0.04*(ext(Saja_RGB)[2]-ext(Saja_RGB)[1]),
y =  ext(Saja_RGB)[4]-0.08*(ext(Saja_RGB)[4]-ext(Saja_RGB)[3]),
label = "C"),
size = 10)+
ggspatial::annotation_scale(location = "br",
pad_y = unit(0.5, "cm"),
text_cex=2)+
theme_Bede_Map()+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png",RGB_Saja,width = 10, height = 9, dpi = 400)
Saja_RGB <- "Data/RGB/SajaSouth_RGB_LIDAR2.tif" %>%
rast() %>%
crop(msk, mask = T)
lim_x<- c(as.numeric(ext(Saja_RGB)[1:2]))
lim_y<- c(as.numeric(ext(Saja_RGB)[3:4]))
RGB_Saja<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Saja_RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4010533,
max_col_value = 200
)+
geom_text(aes(x =  ext(Saja_RGB)[1]+0.04*(ext(Saja_RGB)[2]-ext(Saja_RGB)[1]),
y =  ext(Saja_RGB)[4]-0.08*(ext(Saja_RGB)[4]-ext(Saja_RGB)[3]),
label = "C"),
size = 10)+
ggspatial::annotation_scale(location = "br",
pad_y = unit(0.5, "cm"),
text_cex=2)+
theme_Bede_Map()+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png",RGB_Saja,width = 10, height = 9, dpi = 400)
RGB_Saja<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Saja_RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4010533,
max_col_value = 255
)+
geom_text(aes(x =  ext(Saja_RGB)[1]+0.04*(ext(Saja_RGB)[2]-ext(Saja_RGB)[1]),
y =  ext(Saja_RGB)[4]-0.08*(ext(Saja_RGB)[4]-ext(Saja_RGB)[3]),
label = "C"),
size = 10)+
ggspatial::annotation_scale(location = "br",
pad_y = unit(0.5, "cm"),
text_cex=2)+
theme_Bede_Map()+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
RGB_Saja
values(Saja_RGB[values(Saja_RGB) == 0]) <- NA
values(Saja_RGB[values(Saja_RGB) == 0]) = NA
values(Saja_RGB)
NAflag(Saja_RGB) <- 0
RGB_Saja<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Saja_RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4010533,
max_col_value = 255
)+
geom_text(aes(x =  ext(Saja_RGB)[1]+0.04*(ext(Saja_RGB)[2]-ext(Saja_RGB)[1]),
y =  ext(Saja_RGB)[4]-0.08*(ext(Saja_RGB)[4]-ext(Saja_RGB)[3]),
label = "C"),
size = 10)+
ggspatial::annotation_scale(location = "br",
pad_y = unit(0.5, "cm"),
text_cex=2)+
theme_Bede_Map()+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png",RGB_Saja,width = 10, height = 9, dpi = 400)
library(sf)
library(terra)
library(tidyverse)
library(Utilities.Package)
RGB <- rast("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png")
RGB(RGB) <- 1:3
Pred <- rast("Paper/Figures/High_res/Prediction_Map/Saja_DISCOV.png")
RGB <- rast("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png")
RGB(RGB) <- 1:3
Pred <- rast("Paper/Figures/High_res/Prediction_Map/Saja_DISCOV.png")
RGB(Pred) <- 1:3
offset = 50
ext(Pred) <- c(0,4000,0,3600)
ext(RGB) <- c(4000,8000,0,3600)
ggplot()+
tidyterra::geom_spatraster_rgb(data = Pred,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)+
tidyterra::geom_spatraster_rgb(data = RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)
ext(Pred) <- c(0,4000,3600,0)
ext(RGB) <- c(4000,8000,3600,0)
ext(RGB) <- c(4000,8000,0,-3600)
pic <- rast("Paper/Figures/High_res/Prediction_Map/PictureSaja.jpg")
pic <- rast("Data/RGB/PictureSaja.jpg")
RGB(pic) <- 1:3
plot(pic)
pic
3600 + (1868*2)
RGB <- rast("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png")
RGB(RGB) <- 1:3
Pred <- rast("Paper/Figures/High_res/Prediction_Map/Saja_DISCOV.png")
RGB(Pred) <- 1:3
pic <- rast("Data/RGB/PictureSaja.jpg")
RGB(pic) <- 1:3
offset = 50
ext(Pred) <- c(0,4000,0,3600)
ext(RGB) <- c(4000,8000,0,3600)
ext(pic) <- c(0,8000,3600,3600 + (1868*2))
Saja_patchwork<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Pred,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)+
tidyterra::geom_spatraster_rgb(data = RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)+
tidyterra::geom_spatraster_rgb(data = pic,
r = 1,
g = 2,
b = 3,
maxcell = 4000*1689
)+
coord_equal()+
theme_void()
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_maps.png",Saja_patchwork,width = 10, height = 9.5, dpi = 400)
ggsave("Paper/Figures/Low_res/Belon_maps.png",Saja_patchwork,width = 10, height = 9.5, dpi = 200)
pic <- rast("Data/RGB/PictureSaja.jpg")
RGB(pic) <- 1:3
plot(pic)
pic <- rast("Data/RGB/PictureSaja.jpg")
RGB(pic) <- 1:3
plot(pic)
pic <- rast("Data/RGB/PictureSaja.jpg")
RGB(pic) <- 1:3
plot(pic)
plot(pic)
pic <- rast("Data/RGB/PictureSaja.jpg")
RGB(pic) <- 1:3
plot(pic)
offset = 50
ext(Pred) <- c(0,4000,0,3600)
ext(RGB) <- c(4000,8000,0,3600)
ext(pic) <- c(0,8000,3600,3600 + (1868*2))
Saja_patchwork<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Pred,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)+
tidyterra::geom_spatraster_rgb(data = RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)+
tidyterra::geom_spatraster_rgb(data = pic,
r = 1,
g = 2,
b = 3,
maxcell = 4000*1689
)+
coord_equal()+
theme_void()
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_maps.png",Saja_patchwork,width = 10, height = 9.5, dpi = 400)
ggsave("Paper/Figures/Low_res/Belon_maps.png",Saja_patchwork,width = 10, height = 9.5, dpi = 200)
#| cache: false
#| echo: false
#| warning: false
#| eval: false
library(terra)
library(tidyverse)
library(Utilities.Package)
library(sf)
msk <- "Data/shp/mask/SajaSouth_32630.shp" %>%
read_sf()
DISCOV_rast <- rast("Data/DISCOV/Saja_South_25062024_DISCOV_InvaSea_26112024_pred.tif") %>%
project(crs(msk), method = "near") %>%
crop(msk, mask = T)
values(DISCOV_rast)[values(DISCOV_rast) == 0] = NA
names(DISCOV_rast) <- "layer"
DISCOV_rast<-DISCOV_rast %>%
as.factor()
DISCOV_Saja <- ggplot()+
tidyterra::geom_spatraster(data = DISCOV_rast,
mapping = aes(fill = layer),
maxcell = 500832*8)+
scale_fill_manual(breaks = c(1,2,3,4,5,6,8),
values=c("#DAA520","#b3ff1a","#389318","#873e23","#b3002d","#a2a3a2","#42c9bc",NA,NA),
na.value = NA,
name = "DISCOV v2",
labels = c("Bacillariophyceae",
"Chlorophyceae",
"Magnoliopsida",
"Phaeophyceae",
"Rhodophyceae",
"Sediment",
"Water"))+
geom_text(aes(x =  ext(DISCOV_rast)[1]+0.04*(ext(DISCOV_rast)[2]-ext(DISCOV_rast)[1]),
y =  ext(DISCOV_rast)[4]-0.08*(ext(DISCOV_rast)[4]-ext(DISCOV_rast)[3]),
label = "B"),
size = 10)+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
theme_Bede_Map()+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_DISCOV.png",DISCOV_Saja,width = 10, height = 9, dpi = 400)
#| cache: false
#| echo: false
#| warning: false
#| eval: false
library(sf)
library(terra)
library(tidyverse)
library(Utilities.Package)
msk <- "Data/shp/mask/SajaSouth_32630.shp" %>%
read_sf()
Saja_RGB <- "Data/RGB/SajaSouth_RGB_LIDAR2.tif" %>%
rast() %>%
crop(msk, mask = T)
# values(Belon_RGB[[1]])[values(Belon_RGB[[1]]) == 0] = NA
# RGB(Belon_RGB) <- 1:3
lim_x<- c(as.numeric(ext(Saja_RGB)[1:2]))
lim_y<- c(as.numeric(ext(Saja_RGB)[3:4]))
NAflag(Saja_RGB) <- 0
RGB_Saja<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Saja_RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4010533,
max_col_value = 255
)+
geom_text(aes(x =  ext(Saja_RGB)[1]+0.04*(ext(Saja_RGB)[2]-ext(Saja_RGB)[1]),
y =  ext(Saja_RGB)[4]-0.08*(ext(Saja_RGB)[4]-ext(Saja_RGB)[3]),
label = "B"),
size = 10)+
ggspatial::annotation_scale(location = "br",
pad_y = unit(0.5, "cm"),
text_cex=2)+
theme_Bede_Map()+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png",RGB_Saja,width = 10, height = 9, dpi = 400)
#| cache: false
#| echo: false
#| warning: false
#| eval: false
library(terra)
library(tidyverse)
library(Utilities.Package)
library(sf)
msk <- "Data/shp/mask/SajaSouth_32630.shp" %>%
read_sf()
DISCOV_rast <- rast("Data/DISCOV/Saja_South_25062024_DISCOV_InvaSea_26112024_pred.tif") %>%
project(crs(msk), method = "near") %>%
crop(msk, mask = T)
values(DISCOV_rast)[values(DISCOV_rast) == 0] = NA
names(DISCOV_rast) <- "layer"
DISCOV_rast<-DISCOV_rast %>%
as.factor()
DISCOV_Saja <- ggplot()+
tidyterra::geom_spatraster(data = DISCOV_rast,
mapping = aes(fill = layer),
maxcell = 500832*8)+
scale_fill_manual(breaks = c(1,2,3,4,5,6,8),
values=c("#DAA520","#b3ff1a","#389318","#873e23","#b3002d","#a2a3a2","#42c9bc",NA,NA),
na.value = NA,
name = "DISCOV v2",
labels = c("Bacillariophyceae",
"Chlorophyceae",
"Magnoliopsida",
"Phaeophyceae",
"Rhodophyceae",
"Sediment",
"Water"))+
geom_text(aes(x =  ext(DISCOV_rast)[1]+0.04*(ext(DISCOV_rast)[2]-ext(DISCOV_rast)[1]),
y =  ext(DISCOV_rast)[4]-0.08*(ext(DISCOV_rast)[4]-ext(DISCOV_rast)[3]),
label = "A"),
size = 10)+
coord_sf(expand = F,
xlim = ext(msk)[1:2],
ylim = ext(msk)[3:4])+
theme_Bede_Map()+
# coord_equal()+
theme(
# axis.text.x = element_text(size = 10, angle = -20, color = NA,hjust = 0),
axis.text.y = element_text(size = 15),
axis.text.x = element_text(size = 15),
# axis.ticks.x = element_blank(),
axis.title = element_blank(),
plot.background = element_rect(fill = "white", color = NA),
legend.background = element_blank(),
legend.position = c(0.98,0.98),
legend.text = element_text(size = 15),
legend.key.size = unit(1,"cm"))
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_DISCOV.png",DISCOV_Saja,width = 10, height = 9, dpi = 400)
RGB <- rast("Paper/Figures/High_res/Prediction_Map/Saja_RGB.png")
RGB(RGB) <- 1:3
Pred <- rast("Paper/Figures/High_res/Prediction_Map/Saja_DISCOV.png")
RGB(Pred) <- 1:3
pic <- rast("Data/RGB/PictureSaja.png")
RGB(pic) <- 1:3
plot(pic)
pic <- rast("Data/RGB/PictureSaja.png")
RGB(pic) <- 1:3
plot(pic)
offset = 50
ext(Pred) <- c(0,4000,0,3600)
ext(RGB) <- c(4000,8000,0,3600)
ext(pic) <- c(2000,6000,3600,3600 + (1868))
Saja_patchwork<- ggplot()+
tidyterra::geom_spatraster_rgb(data = Pred,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)+
tidyterra::geom_spatraster_rgb(data = RGB,
r = 1,
g = 2,
b = 3,
maxcell = 4000*3600
)+
tidyterra::geom_spatraster_rgb(data = pic,
r = 1,
g = 2,
b = 3,
maxcell = 4000*1689
)+
coord_equal()+
theme_void()
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_maps.png",Saja_patchwork,width = 10, height = 9.5, dpi = 400)
3600 + (1868)
54680/8000
ggsave("Paper/Figures/High_res/Prediction_Map/Saja_maps.png",Saja_patchwork,width = 10, height = 6.83, dpi = 400)
ggsave("Paper/Figures/Low_res/Belon_maps.png",Saja_patchwork,width = 10, height =  6.83, dpi = 200)
ggsave("Paper/Figures/Low_res/Saja_maps.png",Saja_patchwork,width = 10, height =  6.83, dpi = 200)
10800/1800
10800/1819
#| cache: true
#| echo: false
#| warning: false
#| eval: false
library(fs)
# Define the size threshold in bytes (100 MB)
size_threshold <- 100 * 1024 * 1024
# Get a list of all files in the repository
files <- dir_ls(recurse = TRUE, type = "file")
# Filter files larger than the size threshold
large_files <- files[file_info(files)$size > size_threshold]
# Check if there are large files
if (length(large_files) > 0) {
# Read the existing .gitignore file if it exists
gitignore_path <- ".gitignore"
gitignore_content <- if (file_exists(gitignore_path)) {
readLines(gitignore_path)
} else {
character(0)
}
# Identify files not already in .gitignore
files_to_add <- large_files[!large_files %in% gitignore_content]
# Append new large files to .gitignore
if (length(files_to_add) > 0) {
writeLines(c(gitignore_content, files_to_add), gitignore_path)
message(length(files_to_add), " file(s) added to .gitignore.")
} else {
message("No new files to add to .gitignore.")
}
} else {
message("No files larger than 100 MB found.")
}
