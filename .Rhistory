plot.background = element_rect(fill = "white", color = NA))
plot <- (b)+(a)
plot
b <- ggplot(df_spectra) +
geom_line(aes(x = Wavelength, y = mean))+
geom_ribbon(aes(x = Wavelength, y = mean, ymin = mean-sd, ymax = mean+sd), alpha = 0.05)+
geom_vline(xintercept = chla,
color = "darkred", linetype = "dashed")+ # chl-a
geom_vline(xintercept = PE,
color = "darkgreen", linetype = "dashed")+
geom_vline(xintercept = PC,
color = "goldenrod", linetype = "dashed")+
geom_vline(xintercept = 645, linetype = "dashed")+
ylab("Reflectance")+
geom_text(
x = 552,
y = 0.17,
label = "Absorption Phycoerythrin",
angle = 90,
color = "darkgreen"
)+
geom_text(
x = 607,
y = 0.17,
label = "Absorption Phycocyanin",
angle = 90,
color = "goldenrod"
)+
geom_text(
x = 665,
y = 0.17,
label = "Absorption Chlorophyll-a",
angle = 90,
color = "darkred"
) +
geom_text(x= 420, y = 0.232, label = "A", size = 8)+
theme_Bede()+
theme( panel.grid.major = ggplot2::element_line(linetype = "dotted",
colour = alpha("grey30",0.5), linewidth = 0.25),
plot.background = element_rect(fill = "white", color = NA))
plot <- (b)+(a)
plot
ggsave("Paper/Figures/High_res/plot_spectral_signature.png",plot, width = 10, height = 5, dpi = 400)
ggsave("Paper/Figures/Low_res/plot_spectral_signature.png",plot, width = 10, height = 5, dpi = 200)
library(rstudioapi)
library(sf)
library(terra)
library(tidyverse)
library(rstudioapi)
img_path <-
img_path <- selectFile()
shp_path <- selectFile()
shp <- read_sf(shp_path)
shp
img <- terra::rast(img_path)
img
crs(img)
crs(img) <- crs("EPSG:4326")
shp <- read_sf(shp_path) %>%
sf_p
shp <- read_sf(shp_path) %>%
st_transform(crs = 4326)
st_crs(shp) <- 4326
shp
terra::rast(img_path)
ext(img)
plot(img)
shp <- read_sf(shp_path)
plot(shp, add =T)
plot(img)+plot(sf)
plot(sf)
plot(sf)
plot(img)+plot(shp)
plot(shp$geometry)
a <- ggplot(result_df) +
geom_line(aes(x = wavelength+10, y = mean))+
geom_ribbon(aes(x = wavelength+10, y = mean, ymin = mean-sd, ymax = mean+sd), alpha = 0.05)+
geom_vline(xintercept = chla,
color = "darkred", linetype = "dashed")+ # chl-a
geom_vline(xintercept = PE,
color = "darkgreen", linetype = "dashed")+
geom_vline(xintercept = PC,
color = "goldenrod", linetype = "dashed")+
# geom_vline(xintercept = 645, linetype = "dashed")+
xlim(400, 700)+
theme_Bede()+
geom_text(x= 420, y = 10e-06, label = "B", size = 8)+
ylab("Second Derivative")+
xlab("Wavelength")+
# geom_text(
#   x = 557,
#   y = -0.000006,
#   label = "Absorption Phycoerythrin",
#   angle = 90,
#   color = "darkgreen"
# )+
# geom_text(
#   x = 612,
#   y = -0.000006,
#   label = "Absorption Phycocyanin",
#   angle = 90,
#   color = "goldenrod"
# )+
# geom_text(
#   x = 670,
#   y = -0.000006,
#   label = "Absorption Chlorophyll-a",
#   angle = 90,
#   color = "darkred"
# )+
scale_y_continuous(position = "right",
labels = scales::label_number(
suffix = "e-06", scale = 1e6))+
theme(panel.grid.major = ggplot2::element_line(linetype = "dotted",
colour = alpha("grey30",0.5), linewidth = 0.25),
plot.background = element_rect(fill = "white", color = NA)
)
b <- ggplot(df_spectra) +
geom_line(aes(x = Wavelength, y = mean))+
geom_ribbon(aes(x = Wavelength, y = mean, ymin = mean-sd, ymax = mean+sd), alpha = 0.05)+
geom_vline(xintercept = chla,
color = "darkred", linetype = "dashed")+ # chl-a
geom_vline(xintercept = PE,
color = "darkgreen", linetype = "dashed")+
geom_vline(xintercept = PC,
color = "goldenrod", linetype = "dashed")+
# geom_vline(xintercept = 645, linetype = "dashed")+
ylab("Reflectance")+
geom_text(
x = 552,
y = 0.17,
label = "Absorption Phycoerythrin",
angle = 90,
color = "darkgreen"
)+
geom_text(
x = 607,
y = 0.17,
label = "Absorption Phycocyanin",
angle = 90,
color = "goldenrod"
)+
geom_text(
x = 665,
y = 0.17,
label = "Absorption Chlorophyll-a",
angle = 90,
color = "darkred"
) +
geom_text(x= 420, y = 0.232, label = "A", size = 8)+
theme_Bede()+
theme( panel.grid.major = ggplot2::element_line(linetype = "dotted",
colour = alpha("grey30",0.5), linewidth = 0.25),
plot.background = element_rect(fill = "white", color = NA))
plot <- (b)+(a)
plot
ggsave("Paper/Figures/High_res/plot_spectral_signature.png",plot, width = 10, height = 5, dpi = 400)
ggsave("Paper/Figures/Low_res/plot_spectral_signature.png",plot, width = 10, height = 5, dpi = 200)
df <- data.frame(
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
Type = c(
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"True Color",
"Black and White",
"True Color",
"True Color"),
`Data Source` = c(
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"Drone Flight"),
`Resolution (cm per Pixel)` = c(
"10",
"90",
"4",
"44",
"44",
"70",
"64",
"18",
"3"
))
df <- data.frame(
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
Type = c(
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"True Color",
"Black and White",
"True Color",
"True Color"),
`Data Source` = c(
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"Drone Flight"),
`Resolution (cm per Pixel)` = c(
"10",
"90",
"4",
"44",
"44",
"70",
"64",
"18",
"3"
)) %>%
flextable()
library(flextable)
data.frame(
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
Type = c(
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"True Color",
"Black and White",
"True Color",
"True Color"),
`Data Source` = c(
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"Drone Flight"),
`Resolution (cm per Pixel)` = c(
"10",
"90",
"4",
"44",
"44",
"70",
"64",
"18",
"3"
)) %>%
flextable()
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
data.frame(
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
Type = c(
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"True Color",
"Black and White",
"True Color",
"True Color"),
`Data Source` = c(
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"Drone Flight"),
`Resolution (cm per Pixel)` = c(
"10",
"90",
"4",
"44",
"44",
"70",
"64",
"18",
"3"
))
rename(`Resolution (cm per Pixel)` = "Res") %>%
flextable()
dplyr::rename(`Resolution (cm per Pixel)` = "Res") %>%
flextable()
data.frame(
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
Type = c(
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"True Color",
"Black and White",
"True Color",
"True Color"),
`Data Source` = c(
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"Drone Flight"),
Res = c(
"10",
"90",
"4",
"44",
"44",
"70",
"64",
"18",
"3"
)) %>%
dplyr::rename(`Resolution (cm per Pixel)` = "Res") %>%
flextable()
data.frame(
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
Type = c(
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"True Color",
"Black and White",
"True Color",
"True Color"),
DataSource = c(
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"Drone Flight"),
Res = c(
"10",
"90",
"4",
"44",
"44",
"70",
"64",
"18",
"3"
)) %>%
dplyr::rename(`Resolution (cm per Pixel)` = "Res",
`Data Source` = "DataSource") %>%
flextable()
data.frame(
Date = c(
"1952-04-26",
"1958-04-22",
"1976-07-? ",
"1978-08-22",
"1982-08-11",
"1992-05-17",
"1997-04-11",
"2012-07-24",
"2024-04-11"),
Type = c(
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"Black and White",
"True Color",
"Black and White",
"True Color",
"True Color"),
DataSource = c(
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"IGN",
"Drone Flight"),
Res = c(
"10",
"90",
"4",
"44",
"44",
"70",
"64",
"18",
"3"
)) %>%
dplyr::rename(`Resolution (cm per Pixel)` = "Res",
`Data Source` = "DataSource") %>%
flextable()%>%
align(align = "center", part = "all") %>% # Align text to center
set_table_properties(layout = "autofit")
shp <- read_sf(selectFile())
img <- terra::rast(selectFile())
shp_i <- shp %>%
rasterize(img)
shp_i
img
stk <- c(img,shp_i)
stk <- c(img,shp_i) %>%
as.data.frame()
unique(stk$layer)
shp <- read_sf(selectFile()) %>%
mutate(ID = 1)
shp_i <- shp %>%
rasterize(img, field="ID = 1")
shp_i <- shp %>%
rasterize(img, field="ID1")
shp_i <- shp %>%
rasterize(img, field="ID")
stk <- c(img,shp_i) %>%
as.data.frame(xy = T) %>%
dplyr::filter(!is.na(layer))
stk <- c(img,shp_i) %>%
as.data.frame(xy = T) %>%
dplyr::filter(!is.na(ID))
stk <- c(img,shp_i) %>%
as.data.frame(xy = T) %>%
dplyr::filter(!is.na(ID)) %>%
dplyr::select(-ID)
write.csv(stk, paste0(selectDirectory(),"/coucou_chouchouuuuu.csv"), row.names = F)
stk
library(sf)
library(terra)
library(rstudioapi)
